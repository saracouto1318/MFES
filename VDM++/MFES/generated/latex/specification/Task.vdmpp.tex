\begin{vdmpp}[breaklines=true]
class Task
instance variables
  protected schedule: Schedule;
  protected patient: Patient;
  protected hospital: Hospital;
  protected medicalAssoc: HealthProfessional;
  protected taskType : Types`TaskType;

  inv taskType <> nil;
operations
 -- Task constructor
(*@
\label{Task:12}
@*)
 public Task: HealthProfessional * Schedule * Patient * Hospital * Types`TaskType ==> Task
  Task(med, s, p, h, t) == (schedule := s; patient := p; hospital := h; taskType := t; medicalAssoc := med; return self)
 pre med.getCC() <> p.getCC()
 post schedule = s and patient = p and hospital = h and medicalAssoc = med;
 
 -- Returns the task's schedule
(*@
\label{getSchedule:18}
@*)
 pure public getSchedule: () ==> Schedule
  getSchedule() == (return schedule);
 
 -- Returns the task's patient
(*@
\label{getPatient:22}
@*)
 pure public getPatient: () ==> Patient
  getPatient() == (return patient);
 
 -- Returns the task's hospital
(*@
\label{getHospital:26}
@*)
 pure public getHospital: () ==> Hospital
  getHospital() == (return hospital);
 
 -- Returns the task's type
(*@
\label{getType:30}
@*)
 pure public getType: () ==> Types`TaskType
  getType() == (return taskType);
 
 -- Returns the task's health professional associated
(*@
\label{getMedAssoc:34}
@*)
 pure public getMedAssoc : () ==> HealthProfessional
  getMedAssoc() == (return medicalAssoc);
 
 -- Sets the task's schedule
(*@
\label{setSchedule:38}
@*)
 public setSchedule : Schedule ==> ()
  setSchedule(s) == (
   for all a in set hospital.getAgendas() do
    if(a.getHealthProfessional().getCC() = medicalAssoc.getCC())
     then (a.addSchedule(schedule); a.removeSchedule(s));
   schedule := s)
 pre s in set hospital.getAgenda(medicalAssoc).getAgenda()
 post s not in set hospital.getAgenda(medicalAssoc).getAgenda();
 
 -- Returns the surgery's associated
(*@
\label{getSurgeryPersons:48}
@*)
 pure public getSurgeryPersons : Types`Type ==> set of (HealthProfessional)
  getSurgeryPersons(t) == ( return {}; );

end Task
\end{vdmpp}
\bigskip
\begin{longtable}{|l|r|r|r|}
\hline
Function or operation & Line & Coverage & Calls \\
\hline
\hline
\hyperref[Task:12]{Task} & 12&100.0\% & 80 \\
\hline
\hyperref[getHospital:26]{getHospital} & 26&100.0\% & 4 \\
\hline
\hyperref[getMedAssoc:34]{getMedAssoc} & 34&100.0\% & 536 \\
\hline
\hyperref[getPatient:22]{getPatient} & 22&100.0\% & 140 \\
\hline
\hyperref[getSchedule:18]{getSchedule} & 18&100.0\% & 348 \\
\hline
\hyperref[getSurgeryPersons:48]{getSurgeryPersons} & 48&100.0\% & 4 \\
\hline
\hyperref[getType:30]{getType} & 30&100.0\% & 488 \\
\hline
\hyperref[setSchedule:38]{setSchedule} & 38&100.0\% & 4 \\
\hline
\hline
Task.vdmpp & & 100.0\% & 1604 \\
\hline
\end{longtable}

