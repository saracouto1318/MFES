\begin{vdmpp}[breaklines=true]
class SafetyNetHospital
instance variables
 private hospitals: set of (Hospital);
 
 inv card hospitals >= 0;
operations

 public SafetyNetHospital : () ==> SafetyNetHospital
  SafetyNetHospital() == (hospitals := {}; return self)
(*@
\label{SafetyNetHospital:10}
@*)
 post hospitals = {};
  
 pure public addHospital : Hospital ==> set of (Hospital)
  addHospital(h) == (return hospitals union {h})
(*@
\label{addHospital:14}
@*)
 pre h not in set hospitals
 post h in set hospitals;
 
 pure public removeHospital : Hospital ==> set of (Hospital)
  removeHospital(h) == (return hospitals \ {h})
(*@
\label{removeHospital:19}
@*)
 pre h in set hospitals
 post h not in set hospitals;
 
 pure public numHospitals : () ==> nat
  numHospitals() == (return card hospitals);
(*@
\label{numHospitals:24}
@*)
 
 -- Mudar -- 
 pure public getHospitalsMoreAppointments : () ==> Hospital
  getHospitalsMoreAppointments() == (
(*@
\label{getHospitalsMoreAppointments:28}
@*)
                    dcl max: nat, hosp: Hospital;
                    max := 0;
                    for all h in set hospitals do
                     if(card (h.getTasksByType(<Appointment>)) > max)
                      then (max := card (h.getTasksByType(<Appointment>)); hosp := h);
                    return hosp);
 
 pure public getDoctorsMoreHospitals : () ==> set of(MedicalAssociated)
  getDoctorsMoreHospitals() == (
(*@
\label{getDoctorsMoreHospitals:37}
@*)
                  dcl doctors: set of(MedicalAssociated);
                  for all h in set hospitals do (
                   dcl med: set of (MedicalAssociated), list: set of(Hospital);
                   med := h.getMedicalAssociatedByType(<Doctor>);
                   
                   list := hospitals \ {h};
                   for all m in set med do(
                    for all l in set list do
                     if(m.getType() = <Doctor> and m in set l.getMedicalAssociatedByType(<Doctor>) and m not in set doctors)
                      then doctors := doctors union {m};
                   );
                  );
                  
                  return doctors;
                 );              
  
end SafetyNetHospital
\end{vdmpp}
