\begin{vdmpp}[breaklines=true]
class Surgery is subclass of Task

types

instance variables
  public mainDoctor: [Surgeon];
  public secondaryDoctors:set of (Surgeon);
  public nurses:set of (Nurse);
  
  inv mainDoctor <> nil;
  inv card secondaryDoctors >= 0;
(*@
\label{Surgery:12}
@*)
  inv card nurses >= 0;
operations

 public Surgery: Surgeon ==> Surgery
(*@
\label{addSecondaryDoctor:16}
@*)
  Surgery(s) == (mainDoctor := s; nurses := {}; secondaryDoctors := {}; return self)
 post mainDoctor = s and nurses = {} and secondaryDoctors = {};
 
(*@
\label{removeSecondaryDoctor:19}
@*)
 pure public addSecondaryDoctor : Surgeon ==> set of (Surgeon)
  addSecondaryDoctor(s) == (return secondaryDoctors union {s})
 pre s not in set secondaryDoctors
(*@
\label{addNurse:22}
@*)
 post s in set secondaryDoctors;
  
 pure public removeSecondaryDoctor : Surgeon ==> set of (Surgeon)
(*@
\label{removeNurse:25}
@*)
  removeSecondaryDoctor(s) == (return secondaryDoctors \ {s})
 pre s in set secondaryDoctors
 post s not in set secondaryDoctors;
(*@
\label{setMainDoctor:28}
@*)
  
 pure public addNurse : Nurse ==> set of (Nurse)
  addNurse(s) == (return nurses union {s})
(*@
\label{getMainDoctor:31}
@*)
 pre s not in set nurses
 post s in set nurses;
  
(*@
\label{getSecondaryDoctor:34}
@*)
(*@
\label{getSecondaryDoctors:34}
@*)
 pure public removeNurse : Nurse ==> set of (Nurse)
  removeNurse(s) == (return nurses \ {s})
 pre s in set nurses
(*@
\label{getNurses:37}
@*)
 post s not in set nurses;
  
 public setMainDoctor : Surgeon ==> ()
  setMainDoctor(s) == (mainDoctor := s);
  
 public getMainDoctor : () ==> Surgeon
  getMainDoctor() == (return mainDoctor);
  
 public getSecondaryDoctors : () ==> set of (Surgeon)
  getSecondaryDoctors() == (return secondaryDoctors);
  
 public getNurses : () ==> set of (Nurse)
  getNurses() == (return nurses);
  
(*@
\label{getType:51}
@*)
 pure public getType : () ==> seq of (char) 
  getType() == (return "Surgery");

end Surgery
\end{vdmpp}
