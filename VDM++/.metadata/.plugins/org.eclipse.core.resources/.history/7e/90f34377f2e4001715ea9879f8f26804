\begin{vdmpp}[breaklines=true]
class Appointment is subclass of Task

instance variables
  public doctor: [Doctor];
  public prescriptions:set of (Prescription);
  
(*@
\label{Appointment:7}
@*)
(*@
\label{Hospital:7}
@*)
  inv doctor <> nil;
  inv card prescriptions >= 0;
operations
 public Appointment: Doctor ==> Appointment
  Appointment(d) == (doctor := d; prescriptions := {}; return self)
 post doctor = d and prescriptions = {};
 
(*@
\label{getDoctorAppointment:14}
@*)
 pure public getDoctorAppointment : () ==> Doctor
  getDoctorAppointment() == (return doctor);
  
(*@
\label{getPrescriptions:17}
@*)
  pure public getPrescriptions : () ==> set of (Prescription)
   getPrescriptions() == (return prescriptions);
   
(*@
\label{getPrescription:20}
@*)
  pure public getPrescription : seq of (char) ==> Prescription
   getPrescription(code) == (
                dcl prescription: Prescription;
                 for all p in set prescriptions do
                  if(p.compare(code))
                   then prescription := p;
                 
(*@
\label{addPrescription:27}
@*)
                 return prescription;
                )
  pre code <> [];
(*@
\label{removePrescription:30}
@*)
  
  pure public addPrescription : Prescription ==> set of (Prescription)
   addPrescription(p) == (return prescriptions union {p})
  pre p not in set prescriptions
  post p in set prescriptions;
                 
 pure public removePrescription : Prescription ==> set of (Prescription)
   removePrescription(p) == (return prescriptions \ {p})
  pre p in set prescriptions
  post p not in set prescriptions;
  
(*@
\label{getType:41}
@*)
  pure public getType : () ==> seq of (char) 
  getType() == (return "Appointment");
   
end Appointment
\end{vdmpp}
